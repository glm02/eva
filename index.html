<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pour Eva | Surprise</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Outfit:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- GSAP Animation Library (Chargement s√©curis√©) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

    <style>
        :root {
            --primary: #e11d48;
            --secondary: #fb7185;
            --bg-color: #fff1f2;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-color);
            overflow: hidden; /* Bloqu√© jusqu'√† l'intro */
        }

        .font-serif { font-family: 'Playfair Display', serif; }
        .font-cursive { font-family: 'Great Vibes', cursive; }

        /* Intro Overlay Styles */
        #intro-overlay {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 9999; /* Tr√®s haut */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            transition: opacity 0.8s ease;
        }

        .glow-btn {
            box-shadow: 0 0 20px rgba(225, 29, 72, 0.5);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            z-index: 10000; /* Au-dessus de l'overlay */
            -webkit-tap-highlight-color: transparent;
        }
        .glow-btn:active {
            transform: scale(0.95);
        }
        .glow-btn:hover {
            box-shadow: 0 0 40px rgba(225, 29, 72, 0.8);
            transform: scale(1.05);
        }

        /* Floating Hearts Background */
        .bg-hearts {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .big-heart-anim {
            animation: heartbeat 1.5s infinite;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.1); }
            70% { transform: scale(1); }
        }

        /* Fallback de s√©curit√© : si JS plante, on cache l'overlay */
        .force-hide {
            display: none !important;
        }
    </style>
</head>
<body class="antialiased text-slate-800">

    <!-- INTRO OVERLAY -->
    <div id="intro-overlay">
        <div class="text-center p-6 max-w-md relative z-10">
            <div class="mb-8 text-rose-500 text-6xl animate-pulse">
                <i class="fa-solid fa-envelope-open-text"></i>
            </div>
            <h1 class="text-3xl md:text-4xl font-serif text-white mb-4">Une surprise pour Eva...</h1>
            <p class="text-slate-400 mb-8 italic">Quelqu'un a pens√© tr√®s fort √† toi.</p>
            
            <button id="start-btn" class="glow-btn bg-rose-600 text-white px-8 py-4 rounded-full font-bold text-lg tracking-wide uppercase flex items-center gap-3 mx-auto select-none">
                <i class="fa-solid fa-heart"></i> Ouvrir
            </button>
        </div>
    </div>

    <!-- MAIN CONTENT (Cach√© au d√©but) -->
    <main id="main-content" class="opacity-0 min-h-screen relative pb-20 flex flex-col items-center transition-opacity duration-1000">
        
        <!-- Background Animation -->
        <div class="bg-hearts" id="heart-container"></div>

        <!-- Header / Hero Section -->
        <section class="min-h-screen flex flex-col items-center justify-center pt-10 px-4 relative w-full text-center">
            
            <div class="absolute top-6 left-6 text-rose-600 font-bold tracking-widest text-sm uppercase opacity-50">
                14 F√©vrier 2026
            </div>

            <!-- Animated Icon instead of Photo -->
            <div class="mb-12 relative">
                <div class="absolute inset-0 bg-rose-400 blur-3xl opacity-20 rounded-full animate-pulse"></div>
                <i class="fa-solid fa-heart text-9xl text-rose-500 big-heart-anim drop-shadow-2xl"></i>
            </div>

            <div class="max-w-3xl mx-auto z-10 space-y-6">
                <h1 class="text-6xl md:text-8xl font-serif text-slate-900 leading-tight">
                    Joyeuse <br><span class="text-rose-600 italic font-cursive">Saint Valentin</span>
                </h1>
                
                <!-- Typing Effect Container -->
                <div class="h-24 flex items-center justify-center">
                    <p id="typewriter-text" class="text-2xl md:text-3xl text-slate-600 font-light"></p>
                </div>
                
                <div class="pt-12 animate-bounce">
                    <i class="fa-solid fa-chevron-down text-rose-400 text-2xl"></i>
                </div>
            </div>
        </section>

        <!-- Message Section -->
        <section class="py-24 px-6 max-w-4xl mx-auto text-center relative w-full">
            <!-- Decor -->
            <i class="fa-solid fa-star text-yellow-400 text-2xl absolute top-20 left-10 md:left-0 animate-spin-slow" style="animation-duration: 4s;"></i>
            <i class="fa-solid fa-star text-yellow-400 text-xl absolute bottom-20 right-10 md:right-0 animate-spin-slow" style="animation-duration: 5s;"></i>

            <div class="bg-white/60 backdrop-blur-md p-10 md:p-16 rounded-3xl shadow-xl border border-white/50 section-element transform hover:scale-[1.01] transition-transform duration-500">
                <i class="fa-solid fa-quote-left text-5xl text-rose-300 mb-8 block"></i>
                
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-8 font-serif">Mon Message pour Toi</h2>
                
                <div class="space-y-6 text-lg md:text-xl text-slate-600 leading-relaxed font-light">
                    <p>
                        Ma ch√®re Eva,
                    </p>
                    <p>
                        Je n'ai pas besoin de photos pour me rappeler √† quel point tu es belle, dr√¥le et intelligente. Chaque moment pass√© avec toi est grav√© dans ma t√™te.
                    </p>
                    <p>
                        Que ce soit pour manger une glace, boire un verre ou juste ne rien faire, tu rends tout meilleur.
                    </p>
                    <p class="font-bold text-rose-600 text-2xl mt-8 font-cursive">
                        Je t'aime.
                    </p>
                </div>

                <div class="mt-12 flex justify-center items-center gap-4">
                    <div class="h-px w-12 bg-rose-300"></div>
                    <span class="text-rose-500 font-bold uppercase tracking-widest text-sm">Ton Rafael</span>
                    <div class="h-px w-12 bg-rose-300"></div>
                </div>
            </div>
        </section>

        <!-- Final Surprise Button -->
        <section class="py-20 text-center pb-32 w-full">
            <h2 class="text-2xl font-serif mb-8 text-slate-700">J'ai une derni√®re chose...</h2>
            
            <div class="relative inline-block group cursor-pointer" onclick="showFinalSurprise()">
                <div class="absolute -inset-1 bg-gradient-to-r from-rose-600 to-orange-600 rounded-full blur opacity-75 group-hover:opacity-100 transition duration-200 animate-tilt"></div>
                <button class="relative bg-black text-white px-12 py-6 rounded-full font-bold text-xl flex items-center gap-4 transition-transform active:scale-95">
                    <i class="fa-solid fa-gift text-rose-500 text-2xl animate-bounce"></i>
                    Clique pour ton cadeau
                </button>
            </div>
        </section>
    </main>

    <!-- FINAL MODAL -->
    <div id="final-modal" class="fixed inset-0 z-50 bg-black/90 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl p-8 max-w-lg w-full text-center relative overflow-hidden shadow-2xl">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-black transition">
                <i class="fa-solid fa-times text-2xl"></i>
            </button>
            
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-rose-500 to-orange-500"></div>

            <div class="mb-6 mt-4">
                <div class="w-24 h-24 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4 text-rose-500 text-4xl">
                    <i class="fa-solid fa-utensils"></i>
                </div>
            </div>

            <h3 class="text-4xl font-serif font-bold text-slate-900 mb-2">Bon pour...</h3>
            <p class="text-rose-600 font-bold text-2xl mb-2">Un D√Æner en Amoureux ! ü•Ç</p>
            
            <p class="text-gray-500 mb-8 font-light">
                Une soir√©e rien que pour nous.<br>
                Mets-toi sur ton 31 !
            </p>

            <!-- Calendar Details -->
            <div class="bg-slate-50 rounded-2xl p-6 mb-8 border border-slate-100">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-slate-400 text-sm font-bold uppercase tracking-wider">Quand ?</span>
                    <span class="text-rose-500 font-bold"><i class="fa-regular fa-clock mr-2"></i>20:00</span>
                </div>
                <p class="text-slate-800 font-bold text-xl mb-1">Samedi dans 2 semaines</p>
                <p class="text-slate-500 text-sm">R√©serve ta soir√©e ‚ù§Ô∏è</p>
            </div>

            <button onclick="addToCalendar()" class="w-full py-4 rounded-xl bg-slate-900 text-white font-bold hover:bg-slate-800 transition flex justify-center items-center gap-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <i class="fa-solid fa-calendar-plus text-rose-400"></i> Ajouter √† ton agenda
            </button>
        </div>
    </div>

    <script>
        // Fonction principale charg√©e uniquement quand tout est pr√™t
        window.addEventListener('load', () => {
            console.log("Site charg√©, initialisation des animations...");

            // 1. Initialisation GSAP (avec s√©curit√© try/catch)
            try {
                if (typeof gsap !== 'undefined') {
                    gsap.registerPlugin(ScrollTrigger, TextPlugin);
                } else {
                    console.error("GSAP n'est pas charg√©.");
                    // Si GSAP bug, on ouvre le site quand m√™me manuellement en cliquant
                }
            } catch (e) {
                console.log("Erreur plugins GSAP:", e);
            }

            // 2. Gestionnaire du bouton OUVRIR
            const startBtn = document.getElementById('start-btn');
            const introOverlay = document.getElementById('intro-overlay');
            const mainContent = document.getElementById('main-content');

            startBtn.addEventListener('click', () => {
                console.log("Bouton cliqu√©");

                // Animation de sortie de l'intro
                if (typeof gsap !== 'undefined') {
                    // Version anim√©e
                    gsap.to(introOverlay, {
                        opacity: 0,
                        y: -100,
                        duration: 1,
                        ease: "power4.inOut",
                        onComplete: () => {
                            introOverlay.style.display = 'none';
                            document.body.style.overflow = 'auto'; 
                            launchMainAnimations();
                        }
                    });
                } else {
                    // Version de secours (si le script bug)
                    introOverlay.style.opacity = '0';
                    setTimeout(() => {
                        introOverlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        mainContent.style.opacity = '1';
                    }, 500);
                }
            });

            // 3. Animation des C≈ìurs en fond
            setInterval(createHeart, 600);
        });

        // Fonction pour lancer les animations principales
        function launchMainAnimations() {
            const mainContent = document.getElementById('main-content');
            mainContent.classList.remove('opacity-0');
            mainContent.style.opacity = '1';

            if (typeof gsap !== 'undefined') {
                // Animate Big Heart
                gsap.from(".fa-heart.text-9xl", {
                    scale: 0,
                    rotation: -180,
                    opacity: 0,
                    duration: 1.5,
                    ease: "elastic.out(1, 0.5)"
                });

                // Text Typing Effect
                gsap.to("#typewriter-text", {
                    text: "√Ä la femme la plus incroyable...",
                    duration: 3,
                    delay: 0.5,
                    ease: "none"
                });

                // Message Box Slide Up
                gsap.from(".section-element", {
                    scrollTrigger: {
                        trigger: ".section-element",
                        start: "top 80%"
                    },
                    y: 100,
                    opacity: 0,
                    duration: 1,
                    ease: "power3.out"
                });
            }
        }

        // --- BACKGROUND HEARTS ---
        function createHeart() {
            const container = document.getElementById('heart-container');
            if(!container) return; 

            const heart = document.createElement('div');
            heart.innerHTML = '<i class="fa-solid fa-heart"></i>';
            heart.className = 'absolute text-rose-300/20'; 
            
            const startLeft = Math.random() * 100;
            const size = Math.random() * 20 + 10;
            const duration = Math.random() * 10 + 10;

            heart.style.left = startLeft + 'vw';
            heart.style.fontSize = size + 'px';
            heart.style.top = '100vh';

            container.appendChild(heart);

            if (typeof gsap !== 'undefined') {
                gsap.to(heart, {
                    y: -120 + 'vh',
                    rotation: 360,
                    duration: duration,
                    ease: "linear",
                    onComplete: () => heart.remove()
                });
            } else {
                // Fallback si GSAP marche pas
                heart.style.transition = `top ${duration}s linear, transform ${duration}s linear`;
                setTimeout(() => {
                    heart.style.top = '-10vh';
                    heart.style.transform = 'rotate(360deg)';
                }, 100);
                setTimeout(() => heart.remove(), duration * 1000);
            }
        }

        // --- SURPRISE & CALENDAR LOGIC ---
        function showFinalSurprise() {
            const modal = document.getElementById('final-modal');
            modal.classList.remove('hidden');
            
            if (typeof gsap !== 'undefined') {
                gsap.from(modal.children[0], {
                    scale: 0.8,
                    opacity: 0,
                    duration: 0.4,
                    ease: "back.out(1.7)"
                });
            }
            createConfetti();
        }

        function closeModal() {
            document.getElementById('final-modal').classList.add('hidden');
        }

        function addToCalendar() {
            const now = new Date();
            const eventDate = new Date(now.getTime() + (14 * 24 * 60 * 60 * 1000)); // +14 days
            eventDate.setHours(20, 0, 0);
            
            const year = eventDate.getFullYear();
            const month = String(eventDate.getMonth() + 1).padStart(2, '0');
            const day = String(eventDate.getDate()).padStart(2, '0');
            const hour = String(eventDate.getHours()).padStart(2, '0');
            const minutes = String(eventDate.getMinutes()).padStart(2, '0');
            
            const startStr = `${year}${month}${day}T${hour}${minutes}00`;
            const endStr = `${year}${month}${day}T230000`; 

            const icsContent = 
`BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
URL:${window.location.href}
DTSTART:${startStr}
DTEND:${endStr}
SUMMARY:D√Æner Surprise avec Rafael ‚ù§Ô∏è
DESCRIPTION:Soir√©e romantique r√©serv√©e ! Surprise totale.
LOCATION:Lieu Secret
END:VEVENT
END:VCALENDAR`;

            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            link.setAttribute('download', 'Soiree_Romantique.ics');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function createConfetti() {
            for(let i=0; i<60; i++) {
                const conf = document.createElement('div');
                conf.style.position = 'fixed';
                conf.style.left = '50%';
                conf.style.top = '50%';
                conf.style.width = Math.random() * 10 + 5 + 'px';
                conf.style.height = Math.random() * 10 + 5 + 'px';
                conf.style.backgroundColor = ['#e11d48', '#fb7185', '#fecdd3', '#fbbf24'][Math.floor(Math.random()*4)];
                conf.style.borderRadius = '50%';
                conf.style.zIndex = 100;
                document.body.appendChild(conf);
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = 250 + Math.random() * 250;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;

                if (typeof gsap !== 'undefined') {
                    gsap.to(conf, {
                        x: tx,
                        y: ty,
                        opacity: 0,
                        duration: 1.5 + Math.random(),
                        ease: "power2.out",
                        onComplete: () => conf.remove()
                    });
                } else {
                    conf.remove(); // Pas de confettis si pas de GSAP pour garder √ßa propre
                }
            }
        }
    </script>
</body>
</html>
